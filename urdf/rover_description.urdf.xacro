<?xml version="1.0" encoding="utf-8"?>
<robot name="rover_description" xmlns:xacro="http://wiki.ros.org/xacro">
  
  <!-- Include the ZED camera macro -->
  <xacro:include filename="$(find rover_description)/urdf/components/zed_camera.urdf.xacro" />
  
  <link name="base_footprint"/>

  <joint name="base_joint" type="fixed">
    <parent link="base_footprint"/>
    <child link="base_link"/>
    <origin xyz="0 0 0" rpy="0 0 0"/>
  </joint>
  
  <link name="base_link">
    <inertial>
      <origin xyz="0.00283734598617559 -5.48612014375314E-06 0.406897744418785" rpy="0 0 0" />
      <mass value="36.4090186352555" />
      <inertia
        ixx="1.14989797110002"
        ixy="2.43735391975785E-05"
        ixz="0.0182296282265289"
        iyy="0.875741628239762"
        iyz="3.36012534940276E-05"
        izz="1.2152774654334" />
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://rover_description/meshes/base_link.STL" />
      </geometry>
      <material name="">
        <color rgba="0.792156862745098 0.819607843137255 0.933333333333333 1" />
      </material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://rover_description/meshes/base_link.STL" />
      </geometry>
    </collision>
  </link>
  
  <!-- Your existing links and joints for the wheels -->
  <link name="link_BR">
    <inertial>
      <origin xyz="-1.11022302462516E-16 0.075 2.77555756156289E-17" rpy="0 0 0" />
      <mass value="8.03286499782856" />
      <inertia
        ixx="0.0518365067203933"
        ixy="1.9451979284797E-18"
        ixz="1.77633365513707E-17"
        iyy="0.0735497696989294"
        iyz="3.99958369781652E-19"
        izz="0.0518365067203933" />
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://rover_description/meshes/link_BR.STL" />
      </geometry>
      <material name="">
        <color rgba="0.792156862745098 0.819607843137255 0.933333333333333 1" />
      </material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://rover_description/meshes/link_BR.STL" />
      </geometry>
    </collision>
  </link>
  
  <joint name="joint_BR" type="continuous">
    <origin xyz="-0.29633 -0.46 0.135" rpy="0 0 0" />
    <parent link="base_link" />
    <child link="link_BR" />
    <axis xyz="0 1 0" />
  </joint>
  
  <link name="link_BL">
    <inertial>
      <origin xyz="-2.22044604925031E-16 -0.075 -5.55111512312578E-17" rpy="0 0 0" />
      <mass value="8.03286499782856" />
      <inertia
        ixx="0.0518365067203933"
        ixy="1.81890518556632E-18"
        ixz="1.32480164207779E-17"
        iyy="0.0735497696989295"
        iyz="1.87977761238893E-18"
        izz="0.0518365067203933" />
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://rover_description/meshes/link_BL.STL" />
      </geometry>
      <material name="">
        <color rgba="0.792156862745098 0.819607843137255 0.933333333333333 1" />
      </material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://rover_description/meshes/link_BL.STL" />
      </geometry>
    </collision>
  </link>
  
  <joint name="joint_BL" type="continuous">
    <origin xyz="-0.29633 0.46 0.135" rpy="0 0 0" />
    <parent link="base_link" />
    <child link="link_BL" />
    <axis xyz="0 1 0" />
  </joint>
  
  <link name="link_FR">
    <inertial>
      <origin xyz="1.11022302462516E-16 0.0750000000000001 -2.77555756156289E-17" rpy="0 0 0" />
      <mass value="8.03286499782856" />
      <inertia
        ixx="0.0518365067203933"
        ixy="-3.11534428966492E-18"
        ixz="-8.04681299891585E-18"
        iyy="0.0735497696989295"
        iyz="1.2345414931867E-18"
        izz="0.0518365067203933" />
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://rover_description/meshes/link_FR.STL" />
      </geometry>
      <material name="">
        <color rgba="0.792156862745098 0.819607843137255 0.933333333333333 1" />
      </material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://rover_description/meshes/link_FR.STL" />
      </geometry>
    </collision>
  </link>
  
  <joint name="joint_FR" type="continuous">
    <origin xyz="0.35401 -0.46 0.135" rpy="0 0 0" />
    <parent link="base_link" />
    <child link="link_FR" />
    <axis xyz="0 1 0" />
  </joint>
  
  <link name="link_FL">
    <inertial>
      <origin xyz="8.32667268468867E-16 -0.0750000000000007 -1.0547118733939E-15" rpy="0 0 0" />
      <mass value="8.03286499782857" />
      <inertia
        ixx="0.0518365067203933"
        ixy="-3.78750231068312E-18"
        ixz="-3.92798837664047E-18"
        iyy="0.0735497696989295"
        iyz="2.51986915923885E-19"
        izz="0.0518365067203933" />
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://rover_description/meshes/link_FL.STL" />
      </geometry>
      <material name="">
        <color rgba="0.792156862745098 0.819607843137255 0.933333333333333 1" />
      </material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://rover_description/meshes/link_FL.STL" />
      </geometry>
    </collision>
  </link>
  
  <joint name="joint_FL" type="continuous">
    <origin xyz="0.35401 0.46 0.135" rpy="0 0 0" />
    <parent link="base_link" />
    <child link="link_FL" />
    <axis xyz="0 1 0" />
  </joint>

  <!-- ZED Camera Integration -->
  <xacro:zed_camera 
    parent_link="base_link"
    xyz="0.2 0.0 0.6" 
    rpy="0.0 0.0 0.0"
    model="zed2"
    device_namespace="zed" />

</robot>