<?xml version="1.0" encoding="utf-8"?>
<robot name="rover_description">
  <link name="base_footprint"/>

    <joint name="base_joint" type="fixed">
      <parent link="base_footprint"/>
      <child link="base_link"/>
      <origin xyz="0 0 0" rpy="0 0 0"/>
    </joint>
  <link name="base_link">
    <inertial>
      <origin xyz="0.00283734598617559 -5.48612014375314E-06 0.406897744418785" rpy="0 0 0" />
      <mass value="36.4090186352555" />
      <inertia
        ixx="1.14989797110002"
        ixy="2.43735391975785E-05"
        ixz="0.0182296282265289"
        iyy="0.875741628239762"
        iyz="3.36012534940276E-05"
        izz="1.2152774654334" />
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://rover_description/meshes/base_link.STL" />
      </geometry>
      <material name="">
        <color rgba="0.792156862745098 0.819607843137255 0.933333333333333 1" />
      </material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://rover_description/meshes/base_link.STL" />
      </geometry>
    </collision>
  </link>
  
  <link name="link_BR">
    <inertial>
      <origin xyz="-1.11022302462516E-16 0.075 2.77555756156289E-17" rpy="0 0 0" />
      <mass value="8.03286499782856" />
      <inertia
        ixx="0.0518365067203933"
        ixy="1.9451979284797E-18"
        ixz="1.77633365513707E-17"
        iyy="0.0735497696989294"
        iyz="3.99958369781652E-19"
        izz="0.0518365067203933" />
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://rover_description/meshes/link_BR.STL" />
      </geometry>
      <material name="">
        <color rgba="0.792156862745098 0.819607843137255 0.933333333333333 1" />
      </material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://rover_description/meshes/link_BR.STL" />
      </geometry>
    </collision>
  </link>
  
  <joint name="joint_BR" type="continuous">
    <origin xyz="-0.29633 -0.46 0.135" rpy="0 0 0" />
    <parent link="base_link" />
    <child link="link_BR" />
    <axis xyz="0 1 0" />
  </joint>
  
  <link name="link_BL">
    <inertial>
      <origin xyz="-2.22044604925031E-16 -0.075 -5.55111512312578E-17" rpy="0 0 0" />
      <mass value="8.03286499782856" />
      <inertia
        ixx="0.0518365067203933"
        ixy="1.81890518556632E-18"
        ixz="1.32480164207779E-17"
        iyy="0.0735497696989295"
        iyz="1.87977761238893E-18"
        izz="0.0518365067203933" />
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://rover_description/meshes/link_BL.STL" />
      </geometry>
      <material name="">
        <color rgba="0.792156862745098 0.819607843137255 0.933333333333333 1" />
      </material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://rover_description/meshes/link_BL.STL" />
      </geometry>
    </collision>
  </link>
  
  <joint name="joint_BL" type="continuous">
    <origin xyz="-0.29633 0.46 0.135" rpy="0 0 0" />
    <parent link="base_link" />
    <child link="link_BL" />
    <axis xyz="0 1 0" />
  </joint>
  
  <link name="link_FR">
    <inertial>
      <origin xyz="1.11022302462516E-16 0.0750000000000001 -2.77555756156289E-17" rpy="0 0 0" />
      <mass value="8.03286499782856" />
      <inertia
        ixx="0.0518365067203933"
        ixy="-3.11534428966492E-18"
        ixz="-8.04681299891585E-18"
        iyy="0.0735497696989295"
        iyz="1.2345414931867E-18"
        izz="0.0518365067203933" />
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://rover_description/meshes/link_FR.STL" />
      </geometry>
      <material name="">
        <color rgba="0.792156862745098 0.819607843137255 0.933333333333333 1" />
      </material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://rover_description/meshes/link_FR.STL" />
      </geometry>
    </collision>
  </link>
  
  <joint name="joint_FR" type="continuous">
    <origin xyz="0.35401 -0.46 0.135" rpy="0 0 0" />
    <parent link="base_link" />
    <child link="link_FR" />
    <axis xyz="0 1 0" />
  </joint>
  
  <link name="link_FL">
    <inertial>
      <origin xyz="8.32667268468867E-16 -0.0750000000000007 -1.0547118733939E-15" rpy="0 0 0" />
      <mass value="8.03286499782857" />
      <inertia
        ixx="0.0518365067203933"
        ixy="-3.78750231068312E-18"
        ixz="-3.92798837664047E-18"
        iyy="0.0735497696989295"
        iyz="2.51986915923885E-19"
        izz="0.0518365067203933" />
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://rover_description/meshes/link_FL.STL" />
      </geometry>
      <material name="">
        <color rgba="0.792156862745098 0.819607843137255 0.933333333333333 1" />
      </material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="package://rover_description/meshes/link_FL.STL" />
      </geometry>
    </collision>
  </link>
  
  <joint name="joint_FL" type="continuous">
    <origin xyz="0.35401 0.46 0.135" rpy="0 0 0" />
    <parent link="base_link" />
    <child link="link_FL" />
    <axis xyz="0 1 0" />
  </joint>

  <!-- GAZEBO SIM (GZ-SIM) PLUGINS - NOT GAZEBO CLASSIC -->
  
  <!-- 1. Differential Drive Plugin for Gazebo Garden/Harmonic -->
  <gazebo>
    <plugin filename="gz-sim-diff-drive-system" name="gz::sim::systems::DiffDrive">
      <!-- Wheel joints -->
      <left_joint>joint_FL</left_joint>
      <left_joint>joint_BL</left_joint>
      <right_joint>joint_FR</right_joint>
      <right_joint>joint_BR</right_joint>
      
      <!-- Kinematics -->
      <wheel_separation>0.92</wheel_separation>
      <wheel_radius>0.15</wheel_radius>
      
      <!-- Limits -->
      <max_linear_velocity>2.0</max_linear_velocity>
      <min_linear_velocity>-2.0</min_linear_velocity>
      <max_angular_velocity>1.0</max_angular_velocity>
      <min_angular_velocity>-1.0</min_angular_velocity>
      
      <!-- Topics -->
      <topic>cmd_vel</topic>
      <odom_topic>odom</odom_topic>
      <frame_id>odom</frame_id>
      <child_frame_id>base_link</child_frame_id>
      
      <!-- Publishing -->
      <odom_publisher_frequency>30</odom_publisher_frequency>
    </plugin>
  </gazebo>
  
  <!-- 2. Joint State Publisher Plugin for Gazebo Garden/Harmonic -->
  <gazebo>
    <plugin filename="gz-sim-joint-state-publisher-system" name="gz::sim::systems::JointStatePublisher">
      <topic>joint_states</topic>
      <joint_name>joint_FL</joint_name>
      <joint_name>joint_FR</joint_name>
      <joint_name>joint_BL</joint_name>
      <joint_name>joint_BR</joint_name>
    </plugin>
  </gazebo>

  <!-- GAZEBO MATERIALS -->
  <gazebo reference="base_footprint">
    <material>Gazebo/White</material>
  </gazebo>

  <gazebo reference="base_link">
    <material>Gazebo/Grey</material>
    <mu1>0.2</mu1>
    <mu2>0.2</mu2>
  </gazebo>

  <gazebo reference="link_FL">
    <material>Gazebo/DarkGrey</material>
    <mu1>1.2</mu1>
    <mu2>1.2</mu2>
  </gazebo>

  <gazebo reference="link_FR">
    <material>Gazebo/DarkGrey</material>
    <mu1>1.2</mu1>
    <mu2>1.2</mu2>
  </gazebo>

  <gazebo reference="link_BL">
    <material>Gazebo/DarkGrey</material>
    <mu1>1.2</mu1>
    <mu2>1.2</mu2>
  </gazebo>

  <gazebo reference="link_BR">
    <material>Gazebo/DarkGrey</material>
    <mu1>1.2</mu1>
    <mu2>1.2</mu2>
  </gazebo>
</robot>